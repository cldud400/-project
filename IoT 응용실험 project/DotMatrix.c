#include<avr/io.h>
#include<avr/interrupt.h>
#include<stdio.h>


//#define _MAIN

extern void 			initDevices(void);
extern short 			*dotMatrixData;
extern unsigned char    on;
extern unsigned char    ds;
extern unsigned char    stop;
static unsigned char 	dotMatrixPage = 1;

static short			page[10] = {0x300, 0x300, 0x300, 0x300, 0x300, 0x300, 0x300, 0x300, 0x3ff, 0x3ff};
static short			page11[2][10] = {
	{ 0x361, 0x360, 0x370, 0x3a8, 0x330, 0x320, 0x354, 0x388, 0x3ff, 0x3ff },
	{ 0x361, 0x360, 0x370, 0x370, 0x3f0, 0x320, 0x360, 0x360, 0x3ff, 0x3ff }
	};
static short			page22[2][10] = {
	{ 0x361, 0x361, 0x370, 0x3a8, 0x330, 0x320, 0x354, 0x388, 0x3ff, 0x3ff },
	{ 0x361, 0x361, 0x370, 0x370, 0x3f0, 0x320, 0x360, 0x360, 0x3ff, 0x3ff }
	};
static short			page33[2][10] = {
	{ 0x361, 0x361, 0x371, 0x3a8, 0x330, 0x320, 0x354, 0x388, 0x3ff, 0x3ff },
	{ 0x361, 0x361, 0x371, 0x370, 0x3f0, 0x320, 0x360, 0x360, 0x3ff, 0x3ff }
	};
static short			page44[2][10] = {
	{ 0x361, 0x361, 0x371, 0x3a9, 0x330, 0x320, 0x354, 0x388, 0x3ff, 0x3ff },
	{ 0x361, 0x361, 0x371, 0x371, 0x3f0, 0x320, 0x360, 0x360, 0x3ff, 0x3ff }
	};
static short			page55[2][10] = {
	{ 0x361, 0x361, 0x371, 0x3a9, 0x331, 0x320, 0x354, 0x388, 0x3ff, 0x3ff },
	{ 0x361, 0x361, 0x371, 0x371, 0x3f1, 0x320, 0x360, 0x360, 0x3ff, 0x3ff }
	};
static short        pageP[10]={0x000, 0x000, 0x078, 0x048, 0x078, 0x040, 0x040, 0x040, 0x000, 0x000};
static short        page2[10]={0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000};
#ifdef _MAIN
int
main(void)
{
      dotMatrixData = page[0];
	  initDevices();
	  while(1);
}
#endif

void turnDotMatrixPage(void)
{
	if(!on) dotMatrixData = page2;
	if(on && !stop) {
		switch(ds) {
			case 0:
				dotMatrixData = page;
				break;
			case 1:
				dotMatrixData = page11[dotMatrixPage];
				dotMatrixPage++;
				dotMatrixPage %= 2;
				break;
			case 2:
				dotMatrixData = page22[dotMatrixPage];
				dotMatrixPage++;
				dotMatrixPage %= 2;
				break;
			case 3:
				dotMatrixData = page33[dotMatrixPage];
				dotMatrixPage++;
				dotMatrixPage %= 2;
				break;
			case 4:
				dotMatrixData = page44[dotMatrixPage];
				dotMatrixPage++;
				dotMatrixPage %= 2;
				break;
			case 5:
				dotMatrixData = page55[dotMatrixPage];
				dotMatrixPage++;
				dotMatrixPage %= 2;
				break;

		}
	}
     else if(stop) dotMatrixData = pageP;

}

